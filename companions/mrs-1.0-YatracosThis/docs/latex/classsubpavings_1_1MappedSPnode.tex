\hypertarget{classsubpavings_1_1MappedSPnode}{\subsection{subpavings\-:\-:\-Mapped\-S\-Pnode$<$ \-T $>$ \-Class \-Template \-Reference}
\label{classsubpavings_1_1MappedSPnode}\index{subpavings\-::\-Mapped\-S\-Pnode$<$ T $>$@{subpavings\-::\-Mapped\-S\-Pnode$<$ T $>$}}
}


\-A templated derived class based on \hyperlink{classsubpavings_1_1SPnode}{\-S\-Pnode}.  




{\ttfamily \#include $<$mappedspnode.\-hpp$>$}



\-Inheritance diagram for subpavings\-:\-:\-Mapped\-S\-Pnode$<$ \-T $>$\-:


\-Collaboration diagram for subpavings\-:\-:\-Mapped\-S\-Pnode$<$ \-T $>$\-:
\subsubsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classsubpavings_1_1MappedSPnode_a8f23f414976c6bc3409de02288496e04}{$\sim$\-Mapped\-S\-Pnode} ()
\begin{DoxyCompactList}\small\item\em \-Destructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_acc4eb13ea772050e37b1eae2e560b117}{\-Mapped\-S\-Pnode} ()
\begin{DoxyCompactList}\small\item\em \-No-\/argument constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_a5c67c4c7aec0a3ce461b7ac459ad70c2}{\-Mapped\-S\-Pnode} (const ivector \&v)
\begin{DoxyCompactList}\small\item\em \-Initialised constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_a866ab9d7d7e517e5c403588f12d8e919}{\-Mapped\-S\-Pnode} (const \hyperlink{classLabBox}{\-Lab\-Box} \&lb)
\begin{DoxyCompactList}\small\item\em \-Initialised constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_afe15c759857516d725298a1392ab6f07}{\-Mapped\-S\-Pnode} (const ivector \&v, const \-T \&r)
\begin{DoxyCompactList}\small\item\em \-Initialised constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_a5911cc25e5152fe9cced953de14707e7}{\-Mapped\-S\-Pnode} (const \hyperlink{classLabBox}{\-Lab\-Box} \&lb, const \-T \&r)
\begin{DoxyCompactList}\small\item\em \-Initialised constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_a528b15231c2a8476fdeb9283137dc9b1}{\-Mapped\-S\-Pnode} (const \hyperlink{classsubpavings_1_1SPnode}{\-S\-Pnode} \&other)
\begin{DoxyCompactList}\small\item\em \-Copy constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode_a3e0ee96e161385b67f5ccc39b4212bdf}{\-Mapped\-S\-Pnode} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode} \&other)
\begin{DoxyCompactList}\small\item\em \-Copy constructor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a9f159be71fab10b26dec5d080fec95ff}{operator=} (\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ rhs)
\begin{DoxyCompactList}\small\item\em \-Copy assignment operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$ \hyperlink{classsubpavings_1_1MappedSPnode_a700d3bf53c72e2fdecf27446fab902ef}{get\-Parent} () const 
\begin{DoxyCompactList}\small\item\em \-Accessor for the parent of a node. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$ \hyperlink{classsubpavings_1_1MappedSPnode_a31cc4a453d0c821592096b1829e43093}{get\-Left\-Child} () const 
\begin{DoxyCompactList}\small\item\em \-Accessor for the left child of a node. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$ \hyperlink{classsubpavings_1_1MappedSPnode_a3d15d4b64a8c01fbfabdb66c37c89ad9}{get\-Right\-Child} () const 
\begin{DoxyCompactList}\small\item\em \-Accessor for the right child of a node. \end{DoxyCompactList}\item 
\-T \hyperlink{classsubpavings_1_1MappedSPnode_a3e5c6ff11f8640c1a7b3a363e9f841bd}{get\-Range} () const 
\begin{DoxyCompactList}\small\item\em \-Accessor for the range. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_a4e3cc447b700d1a0e8e611f56762a96d}{set\-Range} (\-T r)
\begin{DoxyCompactList}\small\item\em \-Set the range. \end{DoxyCompactList}\item 
std\-::string \hyperlink{classsubpavings_1_1MappedSPnode_ae4b153a0ff33397c3537f1ce9d87b743}{node\-String\-Summary} () const 
\begin{DoxyCompactList}\small\item\em \-Get a string summary of this. \end{DoxyCompactList}\item 
size\-\_\-t \hyperlink{classsubpavings_1_1MappedSPnode_a3f0d891bb2650f6558cc4081ce5102c6}{allocate\-Ranges} (const std\-::vector$<$ \-T $>$ \&ranges\-To\-Allocate, size\-\_\-t index=0)
\begin{DoxyCompactList}\small\item\em \-Recursively allocate a collection of ranges to this and children. \end{DoxyCompactList}\item 
bool \hyperlink{classsubpavings_1_1MappedSPnode_a65c8bb39917da7dc82fb07c9572c7286}{split\-To\-Shape} (std\-::string instruction)
\begin{DoxyCompactList}\small\item\em \-Splits paving according to string instruction. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a817b05cc2d60ff0ee1a98b0addf54131}{node\-Expand} (int comp)
\begin{DoxyCompactList}\small\item\em \-Add two sibling nodes to this provided this is a leaf. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a26af7ee7d7e9c00623dea9e6aed02d92}{node\-Expand} ()
\begin{DoxyCompactList}\small\item\em \-Add two sibling nodes to this provided this is a leaf. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
\-T \hyperlink{classsubpavings_1_1MappedSPnode_a85f4e42ee09fcfa8c47835231ac3c21d}{range}
\begin{DoxyCompactList}\small\item\em \-A range of type \-T. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a83d5b7a4609c73e1818fe2d3231c0979}{slice} (const std\-::vector$<$ int $>$ \&slice\-Dims, const std\-::vector$<$ cxsc\-::real $>$ \&slice\-Pts)
\begin{DoxyCompactList}\small\item\em \-Slice this. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_a829001293a30ff276a50cf518893ad7f}{accept\-S\-P\-Expand\-Visitor} (const \hyperlink{classsubpavings_1_1SPExpandVisitor}{\-S\-P\-Expand\-Visitor}$<$ \-T $>$ \&visitor)
\begin{DoxyCompactList}\small\item\em \-Accept a \hyperlink{classsubpavings_1_1SPExpandVisitor}{\-S\-P\-Expand\-Visitor}. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_ab3d7c0ce1aa100e48554605b9c9c3ac7}{accept\-S\-P\-Value\-Visitor} (const \hyperlink{classsubpavings_1_1SPValueVisitor}{\-S\-P\-Value\-Visitor}$<$ \-T $>$ \&visitor)
\begin{DoxyCompactList}\small\item\em \-Accept a \hyperlink{classsubpavings_1_1SPValueVisitor}{\-S\-P\-Value\-Visitor} visitor. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a30b1a6a37439a3d5ad3611e6ecdf37be}{operator+=} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&add)
\begin{DoxyCompactList}\small\item\em \-Addition to self operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_a1204b445f0526e62aed8ded7a92744f8}{operator+} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&add) const 
\begin{DoxyCompactList}\small\item\em \-Addition operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a11f57501aac4b67b779e3344290101b4}{operator+=} (const \-T \&add)
\begin{DoxyCompactList}\small\item\em \-Self-\/scalar addition operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_a9c951e4722b21949175ab3997dcd3a86}{operator+} (const \-T \&add) const 
\begin{DoxyCompactList}\small\item\em \-Scalar addition operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a1ca00409cd79226e2b626acfb20ea054}{operator-\/=} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&sub)
\begin{DoxyCompactList}\small\item\em \-Subtraction from self operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_acf2b59252b57c2201c5184dbb02a5a20}{operator-\/} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&sub) const 
\begin{DoxyCompactList}\small\item\em \-Subtraction operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a6c67949c1c356830bd0edaae9f75ccbe}{operator-\/=} (const \-T \&sub)
\begin{DoxyCompactList}\small\item\em \-Self-\/scalar subtraction operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_ad4bb0c01c69521b16c62a90a6e540e8f}{operator-\/} (const \-T \&sub) const 
\begin{DoxyCompactList}\small\item\em \-Scalar subtraction operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_aa5949967da59e064734929aaf190fc15}{operator$\ast$=} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&mult)
\begin{DoxyCompactList}\small\item\em \-Multiplication of self operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_af329c66306f63fb572c92c582640633e}{operator$\ast$} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&mult) const 
\begin{DoxyCompactList}\small\item\em \-Multiplication operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a6c028eece36691537a2c824b39d0fb00}{operator$\ast$=} (const \-T \&mult)
\begin{DoxyCompactList}\small\item\em \-Self-\/scalar multiplication operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_a855f75cf76d1ee0235c7aaab29b048f3}{operator$\ast$} (const \-T \&mult) const 
\begin{DoxyCompactList}\small\item\em \-Scalar multiplication operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_a793f3f3b66690ef99c8a737850f7c291}{operator/=} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&div)
\begin{DoxyCompactList}\small\item\em \-Division of self operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_a7a92e3c463e2fbe951824badf0aa2383}{operator/} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&div) const 
\begin{DoxyCompactList}\small\item\em \-Division operator. \end{DoxyCompactList}\item 
\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \& \hyperlink{classsubpavings_1_1MappedSPnode_aab106627889397cf17d3ea7a3626e363}{operator/=} (const \-T \&div)
\begin{DoxyCompactList}\small\item\em \-Self-\/scalar division operator. \end{DoxyCompactList}\item 
const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \hyperlink{classsubpavings_1_1MappedSPnode_ad8deddac45220ce11ba734c5ff4694d0}{operator/} (const \-T \&div) const 
\begin{DoxyCompactList}\small\item\em \-Scalar division operator. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_aceaf989b21707aa1f00a9d8372cf2551}{minimise\-Leaves} ()
\begin{DoxyCompactList}\small\item\em \-Change this so that it has the minimum number of leaves necessary to represent the same overall 'shape' (combination of subpaving volumes and values) as before, by recombining any pair of sibling leaves with identical ranges so that their former parent becomes a leaf with the same range as formerly belonged to each child. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_a4375171ab30bfe88e4a3306f321d3e24}{swap\-M\-S\-P\-S\-R} (\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode} \&spn)
\begin{DoxyCompactList}\small\item\em \-Swap the properties of this and another. \end{DoxyCompactList}\item 
virtual std\-::ostream \& \hyperlink{classsubpavings_1_1MappedSPnode_a798b65086b8c8042522fc317e73247a7}{node\-Print} (std\-::ostream \&os) const 
\begin{DoxyCompactList}\small\item\em \-Print the details of a specific node in a subpaving. \end{DoxyCompactList}\item 
virtual std\-::ostream \& \hyperlink{classsubpavings_1_1MappedSPnode_aa35a5e2e8518004e8feefb3bdea98d53}{leaf\-Output\-Tabs} (std\-::ostream \&os) const 
\begin{DoxyCompactList}\small\item\em \-Print the details of a single leaf node, using tab delimiters. \end{DoxyCompactList}\item 
void \hyperlink{classsubpavings_1_1MappedSPnode_a8c3d82f771a9c88493bffc96dd1341ce}{\-\_\-reshape\-Trees\-To\-Union} (\hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const rhs)
\begin{DoxyCompactList}\small\item\em \-Reshape this and  so that both this and rhs have identical shapes after the operation and that shape is the non-\/minimal union of shape the of this shape and the shape of rhs before the operation. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a5fc2d7092ac40f04bd0f83f4ee110fdc}{\-\_\-add\-Ranges} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const other)
\begin{DoxyCompactList}\small\item\em \-Give this a range equal to range of this and range of other. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a78e906fbd5153a29f4de538ccbdc1383}{\-\_\-subtract\-Ranges} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const other)
\begin{DoxyCompactList}\small\item\em \-Give this a range equal to range of this -\/ range of other. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_aa9df7035975f4d82aa605e6ac2a1ffe3}{\-\_\-mult\-Ranges} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const other)
\begin{DoxyCompactList}\small\item\em \-Give this a range equal to range of this $\ast$ range of other. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a7fb50e0bf02d5d5d5a3753a1ff381ae7}{\-\_\-div\-Ranges} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const other)
\begin{DoxyCompactList}\small\item\em \-Give this a range equal to range of this and range of other. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a30fc46b2dd6b0ca4ad703f323a050c7b}{\-\_\-add\-Non\-Minimal\-Union} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&rhs)
\begin{DoxyCompactList}\small\item\em \-Make a non-\/minimal union of subpavings using addition of ranges. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a9880ddfe3c75fe8e7594ee6222040d79}{\-\_\-subtract\-Non\-Minimal\-Union} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&rhs)
\begin{DoxyCompactList}\small\item\em \-Make a non-\/minimal union of subpavings using subtraction of ranges. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a9f6b48701e09b97fbd169db927df0758}{\-\_\-multiply\-Non\-Minimal\-Union} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&rhs)
\begin{DoxyCompactList}\small\item\em \-Make a non-\/minimal union of subpavings using multiplication of ranges. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a29dac80a6e0ecce51b22816ef78a298d}{\-\_\-divide\-Non\-Minimal\-Union} (const \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode}$<$ \-T $>$ \&rhs)
\begin{DoxyCompactList}\small\item\em \-Make a non-\/minimal union of subpavings using division of ranges. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a4ef713013762306de2040ac389ec140a}{\-\_\-scalar\-Add} (const \-T \&add)
\begin{DoxyCompactList}\small\item\em \-Increment range collection of this. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a91ab734b6f270c26557964473f4977b4}{\-\_\-scalar\-Subtract} (const \-T \&sub)
\begin{DoxyCompactList}\small\item\em \-Increment range collection of this. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_ab716b6d35a31dcba9de12114b3139dc2}{\-\_\-scalar\-Mult} (const \-T \&mult)
\begin{DoxyCompactList}\small\item\em \-Scale up range of this. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a21cbfaf0019ceb215b9c12df05d394f3}{\-\_\-scalar\-Div} (const \-T \&div)
\begin{DoxyCompactList}\small\item\em \-Scale down range of this. \end{DoxyCompactList}\item 
virtual void \hyperlink{classsubpavings_1_1MappedSPnode_a54fec3e936497db34a821b9138b4ad7b}{\-\_\-slice} (const std\-::vector$<$ int $>$ \&slice\-Dims, const std\-::vector$<$ cxsc\-::real $>$ \&slice\-Pts)
\item 
virtual std\-::vector$<$ cxsc\-::real $>$ \hyperlink{classsubpavings_1_1MappedSPnode_a24ca6f695181dd45e5cf05d22042bb44}{slice\-Check} (const std\-::vector$<$ int $>$ \&slice\-Dims, const std\-::vector$<$ cxsc\-::real $>$ \&slice\-Pts) const 
\begin{DoxyCompactList}\small\item\em \-Check slice parameters and return a full vector of slice points. \end{DoxyCompactList}\item 
virtual std\-::ostream \& \hyperlink{classsubpavings_1_1MappedSPnode_acfbd13653a91c69a7091c6e9c18a6d68}{one\-Line\-Output} (std\-::ostream \&os, int level) const 
\end{DoxyCompactItemize}


\subsubsection{\-Detailed \-Description}
\subsubsection*{template$<$typename \-T$>$class subpavings\-::\-Mapped\-S\-Pnode$<$ T $>$}

\-A templated derived class based on \hyperlink{classsubpavings_1_1SPnode}{\-S\-Pnode}. 

\-The base class \hyperlink{classsubpavings_1_1SPnode}{\-S\-Pnode} is a node in the representation of a regular subpaving as a binary tree. \-A node represents a box (interval vector). \-S\-Pnodes are linked together to form the tree. \-The initial box of the subpaving is the box represented by the root node of the tree. \-A box which has been split will be represented as node with one or two children. \-A subpaving of \mbox{[}{\bfseries x}\mbox{]} (union of non-\/overlapping sub-\/ boxes of \mbox{[}{\bfseries x}\mbox{]}) is represented by the leaves (degenerate/ child-\/less) nodes in the tree.

\-The \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode} template is parameterised on the type \-T of the range data mapped to (associated with) each node (i.\-e. with each element of the subpaving). \-Examples of range data types include reals, or intervals, or colours ...

\-A \hyperlink{classsubpavings_1_1MappedSPnode}{\-Mapped\-S\-Pnode} node has a single value of type \-T mapped onto it. \-This value is referred to as the \char`\"{}range value\char`\"{} or \char`\"{}range\char`\"{}.

\-This templatised class provides ways to perform some basic arithmetic-\/like operations on the subpaving and the data mapped to it.

\-It is probably best to regard this class as a class for non-\/minimal node-\/trees, ie a node either has two children or no children. \-The expand method will automatically make two children and there is no way of then creating a minimal tree by cutting off an 'unwanted' child. \-This means that the whole root paving is regarded as the 'support' of the mapping. 

\-Definition at line 92 of file mappedspnode.\-hpp.



\subsubsection{\-Constructor \& \-Destructor \-Documentation}
\hypertarget{classsubpavings_1_1MappedSPnode_a8f23f414976c6bc3409de02288496e04}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!$\sim$\-Mapped\-S\-Pnode@{$\sim$\-Mapped\-S\-Pnode}}
\index{$\sim$\-Mapped\-S\-Pnode@{$\sim$\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{$\sim$\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::$\sim${\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a8f23f414976c6bc3409de02288496e04}


\-Destructor. 



\-Definition at line 102 of file mappedspnode.\-hpp.


\begin{DoxyCode}
{}
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_acc4eb13ea772050e37b1eae2e560b117}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_acc4eb13ea772050e37b1eae2e560b117}


\-No-\/argument constructor. 



\-Definition at line 107 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-Mapped\-S\-Pnode().


\begin{DoxyCode}
{}   // uses the base SPnode class default constructor
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a5c67c4c7aec0a3ce461b7ac459ad70c2}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const ivector \&}]{v}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, explicit\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a5c67c4c7aec0a3ce461b7ac459ad70c2}


\-Initialised constructor. 

\-Initialised with a box. 

\-Definition at line 113 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode(v) {}
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a866ab9d7d7e517e5c403588f12d8e919}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Lab\-Box} \&}]{lb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, explicit\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a866ab9d7d7e517e5c403588f12d8e919}


\-Initialised constructor. 

\-Initialised with a labeled box. 

\-Definition at line 120 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode(lb) {}
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_afe15c759857516d725298a1392ab6f07}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const ivector \&}]{v, }
\item[{const \-T \&}]{r}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, explicit\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_afe15c759857516d725298a1392ab6f07}


\-Initialised constructor. 

\-Initialised with a box and a value of \-T for the range. 

\-Definition at line 128 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode(v), range(r)
    {}
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a5911cc25e5152fe9cced953de14707e7}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Lab\-Box} \&}]{lb, }
\item[{const \-T \&}]{r}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, explicit\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a5911cc25e5152fe9cced953de14707e7}


\-Initialised constructor. 

\-Initialised with a labeled box and a value of \-T for the range. 

\-Definition at line 136 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode(lb), range(r)
    {}
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a528b15231c2a8476fdeb9283137dc9b1}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const {\bf \-S\-Pnode} \&}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, explicit\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a528b15231c2a8476fdeb9283137dc9b1}


\-Copy constructor. 

\-Copies from a plain \hyperlink{classsubpavings_1_1SPnode}{\-S\-Pnode}.

\-Copies from given node downwards. 

\-Definition at line 146 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode()
    {
    if (other.theBox != NULL) {
      theBox = new ivector( other.getBox() );
    }
  
    nodeName = other.nodeName;

    //recursion on the children
    if (other.leftChild) {
      nodeAddLeft(new MappedSPnode(
        *(other.getLeftChild())));
    }
    else leftChild=NULL;

    if (other.rightChild) {
      nodeAddRight(new MappedSPnode(
        *(other.getRightChild())));
    }
    else rightChild=NULL;
        
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a3e0ee96e161385b67f5ccc39b4212bdf}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}}
\index{\-Mapped\-S\-Pnode@{\-Mapped\-S\-Pnode}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-Mapped\-S\-Pnode}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-Mapped\-S\-Pnode} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a3e0ee96e161385b67f5ccc39b4212bdf}


\-Copy constructor. 

\-Copies from a \-Mapped\-S\-Pnode.

\-Copies from given node downwards. 

\-Definition at line 175 of file mappedspnode.\-hpp.


\begin{DoxyCode}
        : SPnode()
    {
    if (other.theBox != NULL) {
      theBox = new ivector( other.getBox() );
    }
  
    range = other.range;
    nodeName = other.nodeName;

    //recursion on the children
    if (other.leftChild) {
      nodeAddLeft(new MappedSPnode(
        *(other.getLeftChild())));
    }
    else leftChild=NULL;

    if (other.rightChild) {
      nodeAddRight(new MappedSPnode(
        *(other.getRightChild())));
    }
    else rightChild=NULL;
        
    }
\end{DoxyCode}


\subsubsection{\-Member \-Function \-Documentation}
\hypertarget{classsubpavings_1_1MappedSPnode_a30fc46b2dd6b0ca4ad703f323a050c7b}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-add\-Non\-Minimal\-Union@{\-\_\-add\-Non\-Minimal\-Union}}
\index{\-\_\-add\-Non\-Minimal\-Union@{\-\_\-add\-Non\-Minimal\-Union}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-add\-Non\-Minimal\-Union}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-add\-Non\-Minimal\-Union} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a30fc46b2dd6b0ca4ad703f323a050c7b}


\-Make a non-\/minimal union of subpavings using addition of ranges. 



\-Definition at line 1180 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator+=().


\begin{DoxyCode}
    {
        
    //if (rhs == NULL || rhs->isEmpty()) do nothing
    
    // should not need to check on rhs here 
    if ((isEmpty()) && !rhs.isEmpty()) {

      *this = MappedSPnode<T>(rhs);
    }
        
    if (!isEmpty() && !rhs.isEmpty()) {

      // make copies of rhs to reshape

      MappedSPnode<T> rhsTemp(rhs);

      // reshape
      _reshapeTreesToUnion(&rhsTemp);

      _addRanges(&rhsTemp);

    }
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a5fc2d7092ac40f04bd0f83f4ee110fdc}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-add\-Ranges@{\-\_\-add\-Ranges}}
\index{\-\_\-add\-Ranges@{\-\_\-add\-Ranges}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-add\-Ranges}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-add\-Ranges} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a5fc2d7092ac40f04bd0f83f4ee110fdc}


\-Give this a range equal to range of this and range of other. 

\-Assumes that this and other are the same from leaves up to this and other, i.\-e. are roots of trees of the same shape up to the depth of this \-Note that other could be a taller trees than this\-: range collections are only combined up to the level of this. 

\-Definition at line 1076 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-add\-Non\-Minimal\-Union().


\begin{DoxyCode}
  {
    if (other == NULL) {
      throw NullSubpavingPointer_Error(
        "MappedSPnode<T>::_addRanges(const MappedSPnode<T> * const)");
    }

    // recurse on the children if any first
    if (!isLeaf()) {
      getLeftChild()->_addRanges(
                          other->getLeftChild());
      getRightChild()->_addRanges(
                          other->getRightChild());

    }

    // deal with this range collection
    range = range + other->range;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a29dac80a6e0ecce51b22816ef78a298d}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-divide\-Non\-Minimal\-Union@{\-\_\-divide\-Non\-Minimal\-Union}}
\index{\-\_\-divide\-Non\-Minimal\-Union@{\-\_\-divide\-Non\-Minimal\-Union}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-divide\-Non\-Minimal\-Union}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-divide\-Non\-Minimal\-Union} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a29dac80a6e0ecce51b22816ef78a298d}


\-Make a non-\/minimal union of subpavings using division of ranges. 

\begin{DoxyPrecond}{\-Precondition}
this and $\ast$rhs are non-\/empty and and range collections same size. 
\end{DoxyPrecond}


\-Definition at line 1263 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator/=().


\begin{DoxyCode}
    {
    if ((isEmpty()) || rhs.isEmpty()) {

      throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::_divideNonMinimalUnion(const MappedSPnode<T> * const)
      ");
    }
    
        // make copies of rhs to reshape

    MappedSPnode<T> rhsTemp(rhs);

    // reshape
    _reshapeTreesToUnion(&rhsTemp);

    _divRanges(&rhsTemp);

  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a7fb50e0bf02d5d5d5a3753a1ff381ae7}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-div\-Ranges@{\-\_\-div\-Ranges}}
\index{\-\_\-div\-Ranges@{\-\_\-div\-Ranges}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-div\-Ranges}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-div\-Ranges} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a7fb50e0bf02d5d5d5a3753a1ff381ae7}


\-Give this a range equal to range of this and range of other. 

\-Assumes that this and other are the same from leaves up to this and other, i.\-e. are roots of trees of the same shape up to the depth of this \-Note that other could be a taller trees than this\-: range collections are only combined up to the level of this. 

\-Definition at line 1154 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-divide\-Non\-Minimal\-Union().


\begin{DoxyCode}
  {
    if (other == NULL) {
      throw NullSubpavingPointer_Error(
        "MappedSPnode<T>::_divRanges(const MappedSPnode<T> * const)");
    }

    // recurse on the children if any first
    if (!isLeaf()) {
      getLeftChild()->_divRanges(
                          other->getLeftChild());
      getRightChild()->_divRanges(
                          other->getRightChild());

    }

    // deal with this range collection
    range = range / other->range;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a9f6b48701e09b97fbd169db927df0758}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-multiply\-Non\-Minimal\-Union@{\-\_\-multiply\-Non\-Minimal\-Union}}
\index{\-\_\-multiply\-Non\-Minimal\-Union@{\-\_\-multiply\-Non\-Minimal\-Union}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-multiply\-Non\-Minimal\-Union}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-multiply\-Non\-Minimal\-Union} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a9f6b48701e09b97fbd169db927df0758}


\-Make a non-\/minimal union of subpavings using multiplication of ranges. 

\begin{DoxyPrecond}{\-Precondition}
this and $\ast$rhs are non-\/empty and and range collections same size. 
\end{DoxyPrecond}


\-Definition at line 1237 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator$\ast$=().


\begin{DoxyCode}
    {
    // should not need to check on rhs not null here 
    if ((isEmpty()) || rhs.isEmpty()) {

      throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::_multiplyNonMinimalUnion(const MappedSPnode<T> *
       const)");
    }
    
        // make copies of rhs to reshape

    MappedSPnode<T> rhsTemp(rhs);

    // reshape
    _reshapeTreesToUnion(&rhsTemp);

    _multRanges(&rhsTemp);

  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_aa9df7035975f4d82aa605e6ac2a1ffe3}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-mult\-Ranges@{\-\_\-mult\-Ranges}}
\index{\-\_\-mult\-Ranges@{\-\_\-mult\-Ranges}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-mult\-Ranges}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-mult\-Ranges} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_aa9df7035975f4d82aa605e6ac2a1ffe3}


\-Give this a range equal to range of this $\ast$ range of other. 

\-Assumes that this and other are the same from leaves up to this and other, i.\-e. are roots of trees of the same shape up to the depth of this \-Note that other could be a taller trees than this\-: range collections are only combined up to the level of this. 

\-Definition at line 1128 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-multiply\-Non\-Minimal\-Union().


\begin{DoxyCode}
  {
    if (other == NULL) {
      throw NullSubpavingPointer_Error(
        "MappedSPnode<T>::_multRanges(const MappedSPnode<T> * const)");
    }

    // recurse on the children if any first
    if (!isLeaf()) {
      getLeftChild()->_multRanges(
                          other->getLeftChild());
      getRightChild()->_multRanges(
                          other->getRightChild());

    }

    // deal with this range collection
    range = range * other->range;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a8c3d82f771a9c88493bffc96dd1341ce}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-reshape\-Trees\-To\-Union@{\-\_\-reshape\-Trees\-To\-Union}}
\index{\-\_\-reshape\-Trees\-To\-Union@{\-\_\-reshape\-Trees\-To\-Union}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-reshape\-Trees\-To\-Union}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-reshape\-Trees\-To\-Union} (
\begin{DoxyParamCaption}
\item[{{\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a8c3d82f771a9c88493bffc96dd1341ce}


\-Reshape this and  so that both this and rhs have identical shapes after the operation and that shape is the non-\/minimal union of shape the of this shape and the shape of rhs before the operation. 



\-Definition at line 1038 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-add\-Non\-Minimal\-Union(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-divide\-Non\-Minimal\-Union(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-multiply\-Non\-Minimal\-Union(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-subtract\-Non\-Minimal\-Union().


\begin{DoxyCode}
  {
    if (rhs == NULL) {

      throw NullSubpavingPointer_Error(
      "MappedSPnode<T>::_reshapeTreesToUnion(MappedSPnode<T> * const)");
    }

    // this is not a leaf, rhs is a leaf
    if (!isLeaf() && rhs->isLeaf()) {

      //we need to expand rhs
      rhs->nodeExpand();
    }

    // this is a leaf, rhs is not a leaf
    if (isLeaf() && !rhs->isLeaf()) {

      //we need to expand this
      nodeExpand();
    }

    // we have made sure that if at least one of them was not a leaf,
    // then neither are now leaves
    // now recurse on the children
    if (!isLeaf() && !rhs->isLeaf()) {
      getLeftChild()->_reshapeTreesToUnion(rhs->getLeftChild());
      getRightChild()->_reshapeTreesToUnion(rhs->getRightChild());

    }
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a4ef713013762306de2040ac389ec140a}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-scalar\-Add@{\-\_\-scalar\-Add}}
\index{\-\_\-scalar\-Add@{\-\_\-scalar\-Add}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-scalar\-Add}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-scalar\-Add} (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{add}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a4ef713013762306de2040ac389ec140a}


\-Increment range collection of this. 

\-Increment range by type \-T scalar. 
\begin{DoxyParams}{\-Parameters}
{\em add} & the scalar increment, of same type as range, to use. \\
\hline
\end{DoxyParams}


\-Definition at line 1288 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator+=().


\begin{DoxyCode}
    {
    
    if (!isEmpty()) {
      range = range + add;
      // recurse on children
      if (hasLCwithBox())
        getLeftChild()->_scalarAdd(add);
      if (hasRCwithBox())
        getRightChild()->_scalarAdd(add);
    }
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a21cbfaf0019ceb215b9c12df05d394f3}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-scalar\-Div@{\-\_\-scalar\-Div}}
\index{\-\_\-scalar\-Div@{\-\_\-scalar\-Div}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-scalar\-Div}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-scalar\-Div} (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{div}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a21cbfaf0019ceb215b9c12df05d394f3}


\-Scale down range of this. 

\-Division this range by type \-T scalar. 
\begin{DoxyParams}{\-Parameters}
{\em div} & the scalar divisor, of same type as range, to use. \\
\hline
\end{DoxyParams}


\-Definition at line 1343 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator/=().


\begin{DoxyCode}
    {
    
    if (!isEmpty()) {
      range = range / div;
      // recurse on children
      if (hasLCwithBox())
        getLeftChild()->_scalarDiv(div);
      if (hasRCwithBox())
        getRightChild()->_scalarDiv(div);
    }
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_ab716b6d35a31dcba9de12114b3139dc2}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-scalar\-Mult@{\-\_\-scalar\-Mult}}
\index{\-\_\-scalar\-Mult@{\-\_\-scalar\-Mult}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-scalar\-Mult}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-scalar\-Mult} (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{mult}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_ab716b6d35a31dcba9de12114b3139dc2}


\-Scale up range of this. 

\-Multiplication this range by type \-T scalar. 
\begin{DoxyParams}{\-Parameters}
{\em mult} & the scalar multiplier, of same type as range, to use. \\
\hline
\end{DoxyParams}


\-Definition at line 1325 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator$\ast$=().


\begin{DoxyCode}
    {
    
    if (!isEmpty()) {
      range = range * mult;
      // recurse on children
      if (hasLCwithBox())
        getLeftChild()->_scalarMult(mult);
      if (hasRCwithBox())
        getRightChild()->_scalarMult(mult);
    }
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a91ab734b6f270c26557964473f4977b4}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-scalar\-Subtract@{\-\_\-scalar\-Subtract}}
\index{\-\_\-scalar\-Subtract@{\-\_\-scalar\-Subtract}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-scalar\-Subtract}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-scalar\-Subtract} (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{sub}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a91ab734b6f270c26557964473f4977b4}


\-Increment range collection of this. 

\-Increment range by type \-T scalar. 
\begin{DoxyParams}{\-Parameters}
{\em add} & the scalar increment, of same type as range, to use. \\
\hline
\end{DoxyParams}


\-Definition at line 1306 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator-\/=().


\begin{DoxyCode}
    {
    
    if (!isEmpty()) {
      range = range - sub;
      // recurse on children
      if (hasLCwithBox())
        getLeftChild()->_scalarSubtract(sub);
      if (hasRCwithBox())
        getRightChild()->_scalarSubtract(sub);
    }
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a54fec3e936497db34a821b9138b4ad7b}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-slice@{\-\_\-slice}}
\index{\-\_\-slice@{\-\_\-slice}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-slice}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-slice} (
\begin{DoxyParamCaption}
\item[{const std\-::vector$<$ int $>$ \&}]{slice\-Dims, }
\item[{const std\-::vector$<$ cxsc\-::real $>$ \&}]{slice\-Pts}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a54fec3e936497db34a821b9138b4ad7b}


\-Definition at line 1357 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Real\-Mapped\-S\-Pnode\-::make\-Slice(), subpavings\-::\-Real\-Mapped\-S\-Pnode\-::slice(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::slice().


\begin{DoxyCode}
  {
    #ifdef SLICE_OUTPUT
      std::cout << "In MappedSPnodeSR<T>::slice, I am " << getNodeName() << 
      std::endl;
    #endif
    
    bool splitOnSliceDim = false;
    
    int splitDim = -1;
    
    if (!isLeaf()) {
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tI am not a leaf: get split dim" << std::endl;
      #endif
      
      /* Check whether we split on a split dim
        before we do anything to the children*/
      splitDim = getSplitDim();
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tsplitDim = " << splitDim << std::endl;
      #endif
      
      std::vector< int >::const_iterator found 
        = find (sliceDims.begin(), sliceDims.end(), splitDim);
    
      // can we find splitDim in the sliceDims?
      splitOnSliceDim = (found < sliceDims.end()); 
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tsplitOnSliceDim = " << splitOnSliceDim << std::endl;
      #endif 
    }
    
    /* if I am a leaf, or did not split on a slice dimension,
     * adjust the box */ 
    if (!splitOnSliceDim) {
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tI did not split on a dimension to take out, or I am a
       leaf: first deal with children ..." << std::endl;
      #endif
      
      if (!isLeaf()) {
        // Slice on the children first
        getLeftChild()->_slice(sliceDims, slicePts);
        getRightChild()->_slice(sliceDims, slicePts);
      }
      
      // now deal with this node itself
      #ifdef SLICE_OUTPUT
        if (!isLeaf()) {
          std::cout << "\nback in " << getNodeName() << std::endl;
          std::cout << "\tI did not split on a dimension to take out, or I am a
       leaf, so need to contract box" << std::endl;
        }
        std::cout << "\tmy split dimension is " << getSplitDim() << std::endl;
        std::cout << "\tmy box is " << getBox() << std::endl;
        std::cout << "\tmy range is " << range << std::endl;
      #endif
      
      ivector box = getBox();
      int dim = VecLen(box);
      int boxLB = Lb(box);
    
      int newDims = dim - sliceDims.size();
      ivector newBox = ivector(newDims); 
      int index = Lb(newBox);
      int oldindex = boxLB;
    
      // put in the upper and lower bounds for the new box
      // for each dimension that stays  
      for (; oldindex <= Ub(box); oldindex++) {
        std::vector<int>::const_iterator fit 
        = find (sliceDims.begin(), sliceDims.end(), (oldindex - boxLB + 1));
        if (!(fit < sliceDims.end())) { // keep this one
          newBox[index] = box[oldindex];
          index++;
        }
      }
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tnew box is " << newBox << std::endl;
      #endif
      
      //store the child node locations and then temporarily detach them
      MappedSPnode <T>* savedLC = getLeftChild();
      MappedSPnode <T>* savedRC = getRightChild();
      leftChild = NULL;
      rightChild = NULL;
      
      // also need to store parent
      MappedSPnode <T>* savedParent = getParent();
      parent = NULL;
      
      T temp = getRange();
      
      // replace contents of this with contents of a newly made node  
      MappedSPnode <T> tempNode(newBox, temp);
      this->swapMSPSR(tempNode);
      
      #ifdef SLICE_OUTPUT
        std::cout << "\tafter contracting, my box is " << getBox() << std::endl
      ;
        std::cout << "\n\tmy range is " << range << std::endl;
      #endif
      
      // put the child pointers back, and reattach to parent
      leftChild = savedLC;
      rightChild = savedRC;
      parent = savedParent;
      
    }
    else {
    
      /* if we split on any of the slice dimensions
         then we drop this from the tree entirely and
         replace it with the child who actually contains the slice */
        
      /*to do this, we just have to know where we split and look at the slice
       * points on the same dimension and see if they are above or below our
       * split. We know we are not a leaf if we are in here at all.  */
      #ifdef SLICE_OUTPUT
        std::cout << "I DID split on a dimension to take out (so I can't be a
       leaf)" << std::endl;
      #endif 
      
      real splitValue = Sup(getLeftChild()->getBox()[splitDim]);  
      
      real slPt = slicePts.at(splitDim-1); // vectors indexed 0 - n-1
      
      #ifdef SLICE_OUTPUT
        std::cout << "split dimension is " << splitDim << " and split value is 
      " << splitValue << std::endl;
        std::cout << "slPt = slicePts.at(splitDim-1) is " << slPt << std::endl;
      #endif
      
      MappedSPnode <T> temp;
      
      // save parent
      MappedSPnode <T>* savedParent = getParent();
      // detach from parent temporarily
      parent = NULL;
        
      if (slPt < splitValue) { // crucial slice point is in left child
      
        #ifdef SLICE_OUTPUT
          std::cout << "slPt is in left child" << getBox() << std::endl;
          std::cout << "need to do getLeftChild()->_slice(sliceDims, slicePts)
       and then copy it " << std::endl;
        #endif
        
        // Slice on the left child
        getLeftChild()->_slice(sliceDims, slicePts);
        
        // copy left child
        temp = *getLeftChild();
      }
      else { // crucial slice point is in right child
      
        #ifdef SLICE_OUTPUT
          std::cout << "slPt is in right child" << getBox() << std::endl;
          std::cout << "need to do getRightChild()->_slice(sliceDims, slicePts)
       and then copy it " << std::endl;
        #endif
        
        // Slice on the right child
        getRightChild()->_slice(sliceDims, slicePts);
        
        // copy left child
        temp = *getRightChild();
      }
      
      #ifdef SLICE_OUTPUT
        std::cout << "\nback in " << getNodeName() << std::endl;
        std::cout << "\tNow copy the temp into me" << std::endl;
        std::cout << "\tmy split dimension is " << getSplitDim() << std::endl;
        std::cout << "\tmy box is " << getBox() << std::endl;
        std::cout << "\tmy range is " << range << std::endl;
      #endif
      
      swapMSPSR(temp); //swap me and temp
        
      #ifdef SLICE_OUTPUT
        std::cout << "\tre-made me out of copy of child that is sliced:" << 
      std::endl;
        std::cout << "\tmy name (before renaming) is now " << getNodeName() << 
      std::endl;
        std::cout << "\tmy range is now " << range << std::endl;
        std::cout << "\tand my box is " << getBox() << std::endl;
        if (!isLeaf() ) {
          std::cout << "\tand my children (before renaming) are:" << std::endl;
          getLeftChild()->oneLineOutput(std::cout, 2);
          getRightChild()->oneLineOutput(std::cout, 2);
        }
      #endif
      
      // restore relationship to parent
      parent = savedParent;
        
        
        
    }// end else
    
    //if we are the root, recursively rename everything
    if (getParent() == NULL) {
      setNodeName("X"); // my name might be wrong
      recursiveRename();
      #ifdef MARG_OUTPUT
        std::cout << "\nNow recursively rename everything from me down\n\n" << 
      std::endl;
      #endif
    }
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a9880ddfe3c75fe8e7594ee6222040d79}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-subtract\-Non\-Minimal\-Union@{\-\_\-subtract\-Non\-Minimal\-Union}}
\index{\-\_\-subtract\-Non\-Minimal\-Union@{\-\_\-subtract\-Non\-Minimal\-Union}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-subtract\-Non\-Minimal\-Union}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-subtract\-Non\-Minimal\-Union} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a9880ddfe3c75fe8e7594ee6222040d79}


\-Make a non-\/minimal union of subpavings using subtraction of ranges. 

\begin{DoxyPrecond}{\-Precondition}
this and $\ast$rhs are non-\/empty and and range collections same size. 
\end{DoxyPrecond}


\-Definition at line 1211 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator-\/=().


\begin{DoxyCode}
    {
        // should not need to check on rhs not null here 
    if ((isEmpty()) || rhs.isEmpty()) {

      throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::_subtractNonMinimalUnion(const MappedSPnode<T> *
       const)");
    }
    
    // make copies of rhs to reshape

    MappedSPnode<T> rhsTemp(rhs);

    // reshape
    _reshapeTreesToUnion(&rhsTemp);

    _subtractRanges(&rhsTemp);

  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a78e906fbd5153a29f4de538ccbdc1383}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!\-\_\-subtract\-Ranges@{\-\_\-subtract\-Ranges}}
\index{\-\_\-subtract\-Ranges@{\-\_\-subtract\-Ranges}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{\-\_\-subtract\-Ranges}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf \-\_\-subtract\-Ranges} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ $\ast$const}]{other}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a78e906fbd5153a29f4de538ccbdc1383}


\-Give this a range equal to range of this -\/ range of other. 

\-Assumes that this and other are the same from leaves up to this and other, i.\-e. are roots of trees of the same shape up to the depth of this \-Note that other could be a taller trees than this\-: range collections are only combined up to the level of this. 

\-Definition at line 1102 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-subtract\-Non\-Minimal\-Union().


\begin{DoxyCode}
  {
    if (other == NULL) {
      throw NullSubpavingPointer_Error(
        "MappedSPnode<T>::_subtractRanges(const MappedSPnode<T> * const)");
    }

    // recurse on the children if any first
    if (!isLeaf()) {
      getLeftChild()->_subtractRanges(
                          other->getLeftChild());
      getRightChild()->_subtractRanges(
                          other->getRightChild());

    }

    // deal with this range collection
    range = range - other->range;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a829001293a30ff276a50cf518893ad7f}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!accept\-S\-P\-Expand\-Visitor@{accept\-S\-P\-Expand\-Visitor}}
\index{accept\-S\-P\-Expand\-Visitor@{accept\-S\-P\-Expand\-Visitor}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{accept\-S\-P\-Expand\-Visitor}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf accept\-S\-P\-Expand\-Visitor} (
\begin{DoxyParamCaption}
\item[{const {\bf \-S\-P\-Expand\-Visitor}$<$ \-T $>$ \&}]{visitor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a829001293a30ff276a50cf518893ad7f}


\-Accept a \hyperlink{classsubpavings_1_1SPExpandVisitor}{\-S\-P\-Expand\-Visitor}. 

\-If this is a leaf, and if the node is willing to split, accepts the visitor and sets the range equal to the value returned by the visitor's visit operation, then recursively asks children to accept visitor too.

\-The node's willingness to split is based on the results of the \hyperlink{classsubpavings_1_1SPnode_ac3e8e3499bcb0acb42181b781d7796b3}{is\-Splittable\-Node()} method.


\begin{DoxyParams}{\-Parameters}
{\em visitor} & a visitor capable of expanding this according to its own criteria and also of returning a value to used as the range of this. \\
\hline
\end{DoxyParams}


\-Definition at line 553 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Expand\-Visitor().


\begin{DoxyCode}
  {
    #ifdef MYDEBUGVISITOR
      std::cout << "Using mappedspnode_sr expander accept" << std::endl;
    #endif
    
    // only accept the visit if this is a leaf and the node is splittable
    if (isLeaf() && isSplittableNode()) {
      range = visitor.visit(this);
      #ifdef MYDEBUGVISITOR
        std::cout << "after visit, range value = " << range << std::endl;
      #endif
    }
    
    
    #ifdef MYDEBUGVISITOR
      if (isLeaf() && !isSplittableNode()) {
        std::cout << "box is too small to split: volume is " << nodeRealVolume(
      ) << std::endl;
      }
    
      if(!isLeaf()) std::cout << "now visit children" << std::endl;
    #endif
    
    if (hasLCwithBox()) (getLeftChild())->acceptSPExpandVisitor(visitor);
    if (hasRCwithBox()) (getRightChild())->acceptSPExpandVisitor(visitor);
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_ab3d7c0ce1aa100e48554605b9c9c3ac7}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!accept\-S\-P\-Value\-Visitor@{accept\-S\-P\-Value\-Visitor}}
\index{accept\-S\-P\-Value\-Visitor@{accept\-S\-P\-Value\-Visitor}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{accept\-S\-P\-Value\-Visitor}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf accept\-S\-P\-Value\-Visitor} (
\begin{DoxyParamCaption}
\item[{const {\bf \-S\-P\-Value\-Visitor}$<$ \-T $>$ \&}]{visitor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_ab3d7c0ce1aa100e48554605b9c9c3ac7}


\-Accept a \hyperlink{classsubpavings_1_1SPValueVisitor}{\-S\-P\-Value\-Visitor} visitor. 

\-Accepts the visitor and sets the range equal to the value returned by the vistor's visit operation.

\-Recursively asks children to accept visitor too.


\begin{DoxyParams}{\-Parameters}
{\em visitor} & a visitor capable of returning a value to be used as the range of this. \\
\hline
\end{DoxyParams}


\-Definition at line 589 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Value\-Visitor().


\begin{DoxyCode}
  {
    #ifdef MYDEBUGVISITORE
      std::cout << "Using mappedspnode_sr valuer accept " << getNodeName() << 
      std::endl;
    #endif
    
    range = visitor.visit(this);
    #ifdef MYDEBUGVISITORE
      std::cout << "after visit, range value = " << range << std::endl;
    #endif
    
    #ifdef MYDEBUGVISITORE
      if(!isLeaf()) std::cout << "now visit children" << std::endl;
    #endif
    
    if (hasLCwithBox()) (getLeftChild())->acceptSPValueVisitor(visitor);
    if (hasRCwithBox()) (getRightChild())->acceptSPValueVisitor(visitor);
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a3f0d891bb2650f6558cc4081ce5102c6}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!allocate\-Ranges@{allocate\-Ranges}}
\index{allocate\-Ranges@{allocate\-Ranges}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{allocate\-Ranges}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ size\-\_\-t {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf allocate\-Ranges} (
\begin{DoxyParamCaption}
\item[{const std\-::vector$<$ \-T $>$ \&}]{ranges\-To\-Allocate, }
\item[{size\-\_\-t}]{index = {\ttfamily 0}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a3f0d891bb2650f6558cc4081ce5102c6}


\-Recursively allocate a collection of ranges to this and children. 

\-Throws a std\-::invalid\-\_\-argument if there are fewer values in {\itshape ranges\-To\-Allocate\/} than there are nodes in this.

\-Allocation order is this, left child with remainder of allocation, right child with remainder.


\begin{DoxyParams}{\-Parameters}
{\em ranges\-To\-Allocate} & a collection of range values to apply to the nodes of the tree rooted at this. \\
\hline
{\em index} & is the index of the value in {\itshape ranges\-To\-Allocate\/} to become the value of the range for this. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{\-Precondition}
ranges\-To\-Allocate.\-size() -\/ index $>$= number of nodes in tree rooted at this. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
\-The nodes in the tree rooted at this have values taken from the values in {\itshape ranges\-To\-Allocate\/}, starting at the value indexed {\itshape index\/} which is applied to this, then allocating the following values to the left child of this and its descendants and then the right child of this and its descendants. 
\end{DoxyPostcond}


\-Definition at line 299 of file mappedspnode.\-hpp.



\-Referenced by do\-M\-C\-M\-C\-G\-R\-Auto(), main(), testing\-Intervals(), testing\-Ints(), testing\-Reals(), and testing\-Rvectors().


\begin{DoxyCode}
    {
    if (index >= rangesToAllocate.size()) {
      throw std::invalid_argument("Range allocations too short");

    }

    range = rangesToAllocate[index];

    std::size_t newIndex = index+1;
    if (hasLCwithBox()) {
      newIndex = getLeftChild()->allocateRanges(rangesToAllocate, newIndex);
    }
    if (hasRCwithBox()) {
      newIndex = getRightChild()->allocateRanges(rangesToAllocate, newIndex);
    }

    // have done all the children
    // if this is the root, want to check we have used all the allocations
    if (NULL == getParent()) {
      if (newIndex < rangesToAllocate.size()) {
        throw std::invalid_argument("More ranges than nodes in tree");
      }

    }

    return newIndex;
  
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a31cc4a453d0c821592096b1829e43093}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!get\-Left\-Child@{get\-Left\-Child}}
\index{get\-Left\-Child@{get\-Left\-Child}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{get\-Left\-Child}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$$\ast$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf get\-Left\-Child} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a31cc4a453d0c821592096b1829e43093}


\-Accessor for the left child of a node. 

\begin{DoxyReturn}{\-Returns}
a copy of the pointer to left\-Child node, cast to this type. 
\end{DoxyReturn}


\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_a2ae7370c24e6c51a99c8bd29b2ffcec3}{subpavings\-::\-S\-Pnode}.



\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_a71ad37450934fcd212d1c13c9f8830d4}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 225 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-add\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-div\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-mult\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-reshape\-Trees\-To\-Union(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Add(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Div(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Mult(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Subtract(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-subtract\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Expand\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Value\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::allocate\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-Mapped\-S\-Pnode(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::minimise\-Leaves(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-Expand(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-String\-Summary(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::one\-Line\-Output(), and subpavings\-::\-Real\-Mapped\-S\-Pnode\-::\-Real\-Mapped\-S\-Pnode().


\begin{DoxyCode}
    { return (MappedSPnode<T>*) leftChild; }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a700d3bf53c72e2fdecf27446fab902ef}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!get\-Parent@{get\-Parent}}
\index{get\-Parent@{get\-Parent}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{get\-Parent}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$$\ast$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf get\-Parent} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a700d3bf53c72e2fdecf27446fab902ef}


\-Accessor for the parent of a node. 

\begin{DoxyReturn}{\-Returns}
a copy of the pointer to parent node, cast to this type. 
\end{DoxyReturn}


\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_ad25db2635b9fa09515a3cb75f4a7ccef}{subpavings\-::\-S\-Pnode}.



\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_a04fef135a04c4d165c08395c531581dd}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 218 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::allocate\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-String\-Summary(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::slice\-Check().


\begin{DoxyCode}
    { return (MappedSPnode<T>*) parent; }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a3e5c6ff11f8640c1a7b3a363e9f841bd}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!get\-Range@{get\-Range}}
\index{get\-Range@{get\-Range}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{get\-Range}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ \-T {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf get\-Range} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a3e5c6ff11f8640c1a7b3a363e9f841bd}


\-Accessor for the range. 

\begin{DoxyReturn}{\-Returns}
a copy of the range. 
\end{DoxyReturn}


\-Definition at line 239 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Real\-Mapped\-S\-Pnode\-::\-\_\-get\-L1distance(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::minimise\-Leaves(), subpavings\-::\-Real\-Mapped\-S\-Pnode\-::operator$<$(), and subpavings\-::\-Real\-Mapped\-S\-Pnode\-::\-Real\-Mapped\-S\-Pnode().


\begin{DoxyCode}
    {   
        return T(range);
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a3d15d4b64a8c01fbfabdb66c37c89ad9}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!get\-Right\-Child@{get\-Right\-Child}}
\index{get\-Right\-Child@{get\-Right\-Child}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{get\-Right\-Child}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$$\ast$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf get\-Right\-Child} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a3d15d4b64a8c01fbfabdb66c37c89ad9}


\-Accessor for the right child of a node. 

\begin{DoxyReturn}{\-Returns}
a copy of the pointer to right\-Child node, cast this type. 
\end{DoxyReturn}


\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_a9477b1cfe157f5730a5514c944953689}{subpavings\-::\-S\-Pnode}.



\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_a19cb07beb697f0f8613a63c0b476ddd9}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 232 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-add\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-div\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-mult\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-reshape\-Trees\-To\-Union(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Add(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Div(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Mult(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Subtract(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-subtract\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Expand\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Value\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::allocate\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-Mapped\-S\-Pnode(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::minimise\-Leaves(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-Expand(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-String\-Summary(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::one\-Line\-Output(), and subpavings\-::\-Real\-Mapped\-S\-Pnode\-::\-Real\-Mapped\-S\-Pnode().


\begin{DoxyCode}
    { return (MappedSPnode<T>*) rightChild; }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_aa35a5e2e8518004e8feefb3bdea98d53}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!leaf\-Output\-Tabs@{leaf\-Output\-Tabs}}
\index{leaf\-Output\-Tabs@{leaf\-Output\-Tabs}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{leaf\-Output\-Tabs}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual std\-::ostream\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf leaf\-Output\-Tabs} (
\begin{DoxyParamCaption}
\item[{std\-::ostream \&}]{os}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_aa35a5e2e8518004e8feefb3bdea98d53}


\-Print the details of a single leaf node, using tab delimiters. 



\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_a0f2381175b37224a185eedbe9601d814}{subpavings\-::\-S\-Pnode}.



\-Definition at line 1005 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        if(theBox != NULL) { // do nothing if there is no box

            ivector thisBox = *theBox; // copy theBox

      // output the nodeName, nodeVolume
            os << nodeName;
            real vol = nodeRealVolume();
            os << "\t" << vol;

            // followed by the range
            os << "\t" << range;

            // followed by intervals making up box using Inf & Sup
            // ie unlike cxsc output, there is no [  ] around them
            for (int i= Lb(thisBox); i <= Ub(thisBox) ; i++) {

                os << "\t" << Inf(thisBox[i])
                    << "\t" << Sup(thisBox[i]);
            }
      os << std::flush;
      
        }
    return os;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_aceaf989b21707aa1f00a9d8372cf2551}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!minimise\-Leaves@{minimise\-Leaves}}
\index{minimise\-Leaves@{minimise\-Leaves}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{minimise\-Leaves}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf minimise\-Leaves} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_aceaf989b21707aa1f00a9d8372cf2551}


\-Change this so that it has the minimum number of leaves necessary to represent the same overall 'shape' (combination of subpaving volumes and values) as before, by recombining any pair of sibling leaves with identical ranges so that their former parent becomes a leaf with the same range as formerly belonged to each child. 

\-Eg a node with two leafs where both children have the same value $ r $ mapped to them can be represented as a single leaf with the value $ r $ mapped to it. minimise\-Leaves can be used after arithmetic operations on nodes to deal with cases where sibling leaf nodes in the result are equivalent in terms of their range values.

\-The minimisation process works from the leaves upwards, so that a tree could potentially be reduced to a single node if every pair of sibling leaves encountered in the process can be recombined. 

\-Definition at line 927 of file mappedspnode.\-hpp.


\begin{DoxyCode}
  {
    if (!isLeaf()) { // can't do anything if this is a leaf
      
      // recurse first
      if ( hasLCwithBox() ) getLeftChild()->minimiseLeaves();
      if ( hasRCwithBox() ) getRightChild()->minimiseLeaves();
      
      // now do me
      if ( isSubLeaf() && 
        (getLeftChild()->getRange() == getRightChild()->getRange()) ) {
        
          // make this range collection one of the childrens
          range = getLeftChild()->getRange();
          delete leftChild;
          leftChild = NULL;
          delete rightChild;
          rightChild = NULL;
      }
    
    }
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a817b05cc2d60ff0ee1a98b0addf54131}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!node\-Expand@{node\-Expand}}
\index{node\-Expand@{node\-Expand}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{node\-Expand}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf node\-Expand} (
\begin{DoxyParamCaption}
\item[{int}]{comp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a817b05cc2d60ff0ee1a98b0addf54131}


\-Add two sibling nodes to this provided this is a leaf. 

\-Creates two children each with half of the box of this. \-Split the box in half normal to dimension set by comp. comp argument is passed to \hyperlink{toolz_8cpp_acb5cc90c84a0b29fbbf2bed1f4ece8d3}{\-Upper()} and \hyperlink{toolz_8cpp_ae667f0f5dcaff56bf979f20da13e9c9f}{\-Lower()}


\begin{DoxyParams}{\-Parameters}
{\em comp} & the dimension on which to bisect this to create children. \\
\hline
\end{DoxyParams}


\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_ac27ee8ea1399ed0121ed970c8fd51543}{subpavings\-::\-S\-Pnode}.



\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_a4d0129dda149a950a06e9d2e3ff802c4}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 421 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-reshape\-Trees\-To\-Union().


\begin{DoxyCode}
    {
        // can only expand if there is a box
    if (isEmpty()) {
      throw NoBox_Error("MappedSPnode<T>::nodeExpand(int)");
    }
    
    // only do something if this node is a leaf
    if (isLeaf()) {
      
      MappedSPnode<T>* newLC = NULL;
      MappedSPnode<T>* newRC = NULL;
      
      try {
        // ivectors to become boxes for new children
        ivector lC, rC;
        // Call Lower() and Upper() to put split boxes
        // into lC and rC respectively
        Lower(getBox(), lC, comp);
        Upper(getBox(), rC, comp);

        // make and add the new children
        newLC = new MappedSPnode<T>(lC, range);
        newRC = new MappedSPnode<T>(rC, range);
        
        nodeAddLeft(newLC);
        nodeAddRight(newRC);
        // both children get the same range as this
        
        //name the new children
        getLeftChild()->setNodeName(nodeName + "L");
        getRightChild()->setNodeName(nodeName + "R");

        // new children have range collection from this
      }
      catch(std::exception& e) {
      // overkill, but try to deal with all eventualities...
        try {
          if (getLeftChild() != NULL) {
            delete (getLeftChild());
            leftChild = NULL;
          }
          
          if (getRightChild() != NULL) {
            delete (getRightChild());
            rightChild = NULL;
          }
          if (newLC != NULL) {
            delete newLC;
            newLC = NULL;
          }
          if (newRC != NULL) {
            delete newRC;
            newRC = NULL;
          }
        }
        catch(std::exception& e) {} //catch and swallow
        
        throw; // rethrow original exception
      }
    }
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a26af7ee7d7e9c00623dea9e6aed02d92}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!node\-Expand@{node\-Expand}}
\index{node\-Expand@{node\-Expand}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{node\-Expand}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf node\-Expand} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a26af7ee7d7e9c00623dea9e6aed02d92}


\-Add two sibling nodes to this provided this is a leaf. 

\-Creates two children each with half of the box of this. 

\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_a0540c55967e7f35843fac029b450ab55}{subpavings\-::\-S\-Pnode}.



\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_ad60865bacd8a43978cf2da02419cbf8f}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 489 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-reshape\-Trees\-To\-Union(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-Expand().


\begin{DoxyCode}
    {
        int maxdiamcomp; // variable to hold first longest dimension
        double temp = ::MaxDiam(getBox(), maxdiamcomp);
        nodeExpand(maxdiamcomp); // complete nodeExpand
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a798b65086b8c8042522fc317e73247a7}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!node\-Print@{node\-Print}}
\index{node\-Print@{node\-Print}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{node\-Print}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual std\-::ostream\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf node\-Print} (
\begin{DoxyParamCaption}
\item[{std\-::ostream \&}]{os}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a798b65086b8c8042522fc317e73247a7}


\-Print the details of a specific node in a subpaving. 

\-Prints\-: node\-Name \mbox{[}tab\mbox{]} \char`\"{}\-Box is\char`\"{} \mbox{[}tab\mbox{]} ... each interval in the box in cxsc output format ... \mbox{[}tab\mbox{]} \char`\"{}\-Box volume is\char`\"{} \mbox{[}tab\mbox{]} volume \mbox{[}tab\mbox{]} \char`\"{}range data is\char`\"{} \mbox{[}tab\mbox{]} range \mbox{[}newline\mbox{]}


\begin{DoxyParams}{\-Parameters}
{\em os} & the stream to print to. \\
\hline
\end{DoxyParams}


\-Reimplemented from \hyperlink{classsubpavings_1_1SPnode_aaf14185437d50e955c5ea938dc6e7559}{subpavings\-::\-S\-Pnode}.



\-Definition at line 977 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        // output for box in form:
        // box, volume, summary data

        if(theBox != NULL) { // do nothing if there is no box

            ivector thisBox = *theBox; // copy theBox

      os << nodeName << "\tBox is:\t";

            for (int i = Lb(thisBox); i <= Ub(thisBox) ; i++) {
                // c-xsc default output for intervals
                os << "\t" << thisBox[i];   }

            os << "\tBox volume is:\t" << nodeVolume();
            os << "\trange data:\t" << range << std::endl;
    }
        return os;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_ae4b153a0ff33397c3537f1ce9d87b743}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!node\-String\-Summary@{node\-String\-Summary}}
\index{node\-String\-Summary@{node\-String\-Summary}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{node\-String\-Summary}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ std\-::string {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf node\-String\-Summary} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_ae4b153a0ff33397c3537f1ce9d87b743}


\-Get a string summary of this. 

\-Used for debugging. 

\-Definition at line 258 of file mappedspnode.\-hpp.


\begin{DoxyCode}
  {
    std::ostringstream oss;
    
    oss << "I am " << getNodeName() << "(address " << this << "),\n";
    oss << "Dimension is " << getDimension() << ", address of box is " << theBox
       << "\n"; 
    oss << "range is " << range << "\n";
    oss << "my parent is ";
    if (getParent() != NULL) oss << getParent()->getNodeName();
    else oss << "NULL"; 
    oss << ", my left child is ";
    if (getLeftChild() != NULL) oss << getLeftChild()->getNodeName();
    else oss << "NULL"; 
    oss << ", my right child is ";
    if (getRightChild() != NULL) oss << getRightChild()->getNodeName();
    else oss << "NULL";
    
    return oss.str();
    
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_acfbd13653a91c69a7091c6e9c18a6d68}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!one\-Line\-Output@{one\-Line\-Output}}
\index{one\-Line\-Output@{one\-Line\-Output}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{one\-Line\-Output}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual std\-::ostream\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf one\-Line\-Output} (
\begin{DoxyParamCaption}
\item[{std\-::ostream \&}]{os, }
\item[{int}]{level}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_acfbd13653a91c69a7091c6e9c18a6d68}


\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_a5287c7cec21af1c8606d735c0478a6fc}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 1675 of file mappedspnode.\-hpp.


\begin{DoxyCode}
  {
    // do me
    for (int i = 0; i < level; ++i) { os << "\t"; }
    os << getNodeName() << "\tRange: " << range 
                  << "\tbox: " << getBox() << std::endl;
    
    // do children
    if (hasLCwithBox()) getLeftChild()->oneLineOutput(os, level+1);
    if (hasRCwithBox()) getRightChild()->oneLineOutput(os, level+1);
    
    return os;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_af329c66306f63fb572c92c582640633e}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator$\ast$@{operator$\ast$}}
\index{operator$\ast$@{operator$\ast$}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator$\ast$}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator$\ast$ (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{mult}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_af329c66306f63fb572c92c582640633e}


\-Multiplication operator. 


\begin{DoxyParams}{\-Parameters}
{\em mult} & the object to multiply this by to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a non-\/minimal union of this and {\itshape mult\/} with a range equal to the the range of this before the operation multiplied by the range of {\itshape mult\/}. \-If both this and {\itshape mult\/} were empty before the operation, the returned object will be empty post the operation. 
\end{DoxyReturn}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape mult\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}


\-Definition at line 796 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result*= mult;
    
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a855f75cf76d1ee0235c7aaab29b048f3}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator$\ast$@{operator$\ast$}}
\index{operator$\ast$@{operator$\ast$}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator$\ast$}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator$\ast$ (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{mult}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a855f75cf76d1ee0235c7aaab29b048f3}


\-Scalar multiplication operator. 


\begin{DoxyParams}{\-Parameters}
{\em mult} & the value to multiply this by to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a mapped paving with the same tree structure as this before the operation with range equal to the range of this before the operation multiplied by {\itshape mult\/}. 
\end{DoxyReturn}


\-Definition at line 822 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result*= mult;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_aa5949967da59e064734929aaf190fc15}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator$\ast$=@{operator$\ast$=}}
\index{operator$\ast$=@{operator$\ast$=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator$\ast$=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator$\ast$= (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{mult}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_aa5949967da59e064734929aaf190fc15}


\-Multiplication of self operator. 


\begin{DoxyParams}{\-Parameters}
{\em mult} & the object to multiply this by. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape mult\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
this is a non-\/minimal union of this and {\itshape mult\/} with a range equal to the the range of this before the operation multiplied by the range of {\itshape mult\/}. \-If both this and {\itshape mult\/} were empty before the operation, this will be empty post the operation. 
\end{DoxyPostcond}


\-Definition at line 764 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    
    // if both empty, do nothing
    if (!isEmpty() || !mult.isEmpty()) {
      
      // just one empty or boxes don't match
      if ( isEmpty() || mult.isEmpty() ||
        (getBox() != mult.getBox() ) ) {
        throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::operator*=(const MappedSPnode<T>& const)");
      }
      // both must be non-empty
      
      this->_multiplyNonMinimalUnion(mult);

      
    }
    
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a6c028eece36691537a2c824b39d0fb00}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator$\ast$=@{operator$\ast$=}}
\index{operator$\ast$=@{operator$\ast$=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator$\ast$=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator$\ast$= (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{mult}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a6c028eece36691537a2c824b39d0fb00}


\-Self-\/scalar multiplication operator. 


\begin{DoxyParams}{\-Parameters}
{\em mult} & the value to multiply this by. \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{\-Postcondition}
this has the same tree structure as before the operation with a range equal to the range of this before the operation multiplied by {\itshape mult\/}. 
\end{DoxyPostcond}


\-Definition at line 810 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    _scalarMult(mult);
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a1204b445f0526e62aed8ded7a92744f8}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator+@{operator+}}
\index{operator+@{operator+}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator+}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator+ (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{add}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a1204b445f0526e62aed8ded7a92744f8}


\-Addition operator. 


\begin{DoxyParams}{\-Parameters}
{\em add} & the object to add to this to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a non-\/minimal union of this and {\itshape add\/}. with a range equal to the sum of the values in ranges of this before the operation and of {\itshape add\/}. \-If both this and {\itshape add\/} were empty before the operation, the object returned will be empty. 
\end{DoxyReturn}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape add\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}


\-Definition at line 644 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    MappedSPnode<T> result =(*this);
  
    result+= add;
    
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a9c951e4722b21949175ab3997dcd3a86}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator+@{operator+}}
\index{operator+@{operator+}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator+}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator+ (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{add}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a9c951e4722b21949175ab3997dcd3a86}


\-Scalar addition operator. 


\begin{DoxyParams}{\-Parameters}
{\em add} & the value to add to this to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a mapped paving with the same tree structure as this before the operation with range equal to the range of this before the operation plus {\itshape add\/}. 
\end{DoxyReturn}


\-Definition at line 670 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result+= add;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a30b1a6a37439a3d5ad3611e6ecdf37be}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator+=@{operator+=}}
\index{operator+=@{operator+=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator+=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator+= (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{add}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a30b1a6a37439a3d5ad3611e6ecdf37be}


\-Addition to self operator. 


\begin{DoxyParams}{\-Parameters}
{\em add} & the object to add to this. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape add\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
this is a non-\/minimal union of this and {\itshape add\/} with a range equal to the sum of the values in ranges of this before the operation and of {\itshape add\/}. \-If both this and {\itshape add\/} were empty before the operation, this will be empty post the operation. 
\end{DoxyPostcond}


\-Definition at line 617 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    // if both empty, do nothing
    if (!isEmpty() || !add.isEmpty()) {
      
      // just one empty or boxes don't match
      if ( isEmpty() || add.isEmpty() ||
        (getBox() != add.getBox() ) ) {
        throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::operator+=(const MappedSPnode<T>& const)");
      }
      
      this->_addNonMinimalUnion(add);
    
    }
    return *this;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a11f57501aac4b67b779e3344290101b4}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator+=@{operator+=}}
\index{operator+=@{operator+=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator+=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator+= (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{add}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a11f57501aac4b67b779e3344290101b4}


\-Self-\/scalar addition operator. 


\begin{DoxyParams}{\-Parameters}
{\em add} & the value to add to this. \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{\-Postcondition}
this has the same tree structure as before the operation with a range equal to the range of this before the operation plus {\itshape add\/}. 
\end{DoxyPostcond}


\-Definition at line 658 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    _scalarAdd(add);
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_acf2b59252b57c2201c5184dbb02a5a20}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator-\/@{operator-\/}}
\index{operator-\/@{operator-\/}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator-\/}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator-\/ (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{sub}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_acf2b59252b57c2201c5184dbb02a5a20}


\-Subtraction operator. 


\begin{DoxyParams}{\-Parameters}
{\em sub} & the object to subtract from this to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a non-\/minimal union of this and {\itshape sub\/} with a range equal to the the value of the range of this before the operation less the range of of {\itshape sub\/}. \-If both this and {\itshape sub\/} were empty before the operation, the returned object will be empty post the operation. 
\end{DoxyReturn}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape sub\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}


\-Definition at line 719 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result-= sub;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_ad4bb0c01c69521b16c62a90a6e540e8f}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator-\/@{operator-\/}}
\index{operator-\/@{operator-\/}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator-\/}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator-\/ (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{sub}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_ad4bb0c01c69521b16c62a90a6e540e8f}


\-Scalar subtraction operator. 


\begin{DoxyParams}{\-Parameters}
{\em sub} & the value to subtract from this to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a mapped paving with the same tree structure as this before the operation with range equal to the range of this before the operation minus {\itshape sub\/}. 
\end{DoxyReturn}


\-Definition at line 745 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result-= sub;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a1ca00409cd79226e2b626acfb20ea054}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator-\/=@{operator-\/=}}
\index{operator-\/=@{operator-\/=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator-\/=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator-\/= (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{sub}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a1ca00409cd79226e2b626acfb20ea054}


\-Subtraction from self operator. 


\begin{DoxyParams}{\-Parameters}
{\em sub} & the object to subtract from this. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape sub\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
this is a non-\/minimal union of this and {\itshape sub\/} with a range equal to the the range of this before the operation less the range of {\itshape sub\/}. \-If both this and {\itshape sub\/} were empty before the operation, this will be empty post the operation. 
\end{DoxyPostcond}


\-Definition at line 690 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    
    // if both empty, do nothing
    if (!isEmpty() || !sub.isEmpty()) {
      
      // just one empty or boxes don't match
      if ( isEmpty() || sub.isEmpty() ||
        (getBox() != sub.getBox() ) ) {
        throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::operator-=(const MappedSPnode<T>& const)");
      }
      
      this->_subtractNonMinimalUnion(sub);
    
    }
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a6c67949c1c356830bd0edaae9f75ccbe}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator-\/=@{operator-\/=}}
\index{operator-\/=@{operator-\/=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator-\/=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator-\/= (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{sub}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a6c67949c1c356830bd0edaae9f75ccbe}


\-Self-\/scalar subtraction operator. 


\begin{DoxyParams}{\-Parameters}
{\em sub} & the value to subtract from this. \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{\-Postcondition}
this has the same tree structure as before the operation with a range equal to the range of this before the operation minus {\itshape sub\/}. 
\end{DoxyPostcond}


\-Definition at line 733 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    _scalarSubtract(sub);
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a7a92e3c463e2fbe951824badf0aa2383}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator/@{operator/}}
\index{operator/@{operator/}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator/}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator/ (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{div}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a7a92e3c463e2fbe951824badf0aa2383}


\-Division operator. 


\begin{DoxyParams}{\-Parameters}
{\em div} & the object to divide this by to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a non-\/minimal union of this and {\itshape div\/} with a range equal to the the range of this before the operation divided by the range of {\itshape div\/}. \-If both this and {\itshape div\/} were empty before the operation, the returned object will be empty post the operation. 
\end{DoxyReturn}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape div\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}


\-Definition at line 872 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result/= div;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_ad8deddac45220ce11ba734c5ff4694d0}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator/@{operator/}}
\index{operator/@{operator/}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator/}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ const {\bf \-Mapped\-S\-Pnode}$<$\-T$>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator/ (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{div}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_ad8deddac45220ce11ba734c5ff4694d0}


\-Scalar division operator. 


\begin{DoxyParams}{\-Parameters}
{\em div} & the value to divide this by to give the object returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
an object with the same tree structure as this before the operation with a range equal to the range of this before the operation divided by {\itshape div\/}. 
\end{DoxyReturn}


\-Definition at line 898 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        MappedSPnode<T> result =(*this);
  
    result/= div;
  
    return result;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a793f3f3b66690ef99c8a737850f7c291}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator/=@{operator/=}}
\index{operator/=@{operator/=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator/=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator/= (
\begin{DoxyParamCaption}
\item[{const {\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{div}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a793f3f3b66690ef99c8a737850f7c291}


\-Division of self operator. 


\begin{DoxyParams}{\-Parameters}
{\em div} & the object to divide this by. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{\-Precondition}
either both this and {\itshape div\/} are empty or both are non-\/empty and the boxes match. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
this is a non-\/minimal union of this and {\itshape div\/} with a range equal to the the range of this before the operation divided by the range of of {\itshape div\/}. \-If both this and {\itshape div\/} were empty before the operation, this will be empty post the operation. 
\end{DoxyPostcond}


\-Definition at line 842 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    // if both empty, do nothing
    if (!isEmpty() || !div.isEmpty()) {
      
      // just one empty or boxes don't match
      if ( isEmpty() || div.isEmpty()  ||
        (getBox() != div.getBox() ) ) {
        throw IncompatibleDimensions_Error(
        "MappedSPnode<T>::operator/=(const MappedSPnode<T>& const)");
      }
      // both must be non-empty
      
      this->_divideNonMinimalUnion(div);

      
    }
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_aab106627889397cf17d3ea7a3626e363}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator/=@{operator/=}}
\index{operator/=@{operator/=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator/=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator/= (
\begin{DoxyParamCaption}
\item[{const \-T \&}]{div}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_aab106627889397cf17d3ea7a3626e363}


\-Self-\/scalar division operator. 


\begin{DoxyParams}{\-Parameters}
{\em div} & the value to divide this by. \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{\-Postcondition}
this has the same tree structure as before the operation. with a range equal to the range of this before the operation divided by {\itshape div\/}. 
\end{DoxyPostcond}


\-Definition at line 886 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
    _scalarDiv(div);
    return *this;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a9f159be71fab10b26dec5d080fec95ff}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!operator=@{operator=}}
\index{operator=@{operator=}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{operator=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ {\bf \-Mapped\-S\-Pnode}$<$\-T$>$\& {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::operator= (
\begin{DoxyParamCaption}
\item[{{\bf \-Mapped\-S\-Pnode}$<$ \-T $>$}]{rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a9f159be71fab10b26dec5d080fec95ff}


\-Copy assignment operator. 

\-Copies from given node downwards. 

\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_ad6a86d365ae237d96c7a8f842700af96}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 203 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {
        rhs.swapMSPSR(*this); // make sure we use our version of swap
    return(*this);
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a4e3cc447b700d1a0e8e611f56762a96d}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!set\-Range@{set\-Range}}
\index{set\-Range@{set\-Range}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{set\-Range}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf set\-Range} (
\begin{DoxyParamCaption}
\item[{\-T}]{r}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a4e3cc447b700d1a0e8e611f56762a96d}


\-Set the range. 


\begin{DoxyParams}{\-Parameters}
{\em r} & the value for the range. \\
\hline
\end{DoxyParams}


\-Definition at line 247 of file mappedspnode.\-hpp.


\begin{DoxyCode}
    {   
        range = r;
    }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a83d5b7a4609c73e1818fe2d3231c0979}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!slice@{slice}}
\index{slice@{slice}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{slice}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf slice} (
\begin{DoxyParamCaption}
\item[{const std\-::vector$<$ int $>$ \&}]{slice\-Dims, }
\item[{const std\-::vector$<$ cxsc\-::real $>$ \&}]{slice\-Pts}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a83d5b7a4609c73e1818fe2d3231c0979}


\-Slice this. 

\-Slice this on at the point jointly specified by {\itshape slice\-Dims\/} and {\itshape slice\-Pts\/}. \-For example, if this has a 3-\/dimensional root box \mbox{[}-\/1,1\mbox{]}x\mbox{[}-\/1,1\mbox{]}x\mbox{[}-\/1,1\mbox{]}, ie dimensions \{1,2,3\} and {\itshape slice\-Dims\/} = \{2,3\} and {\itshape slice\-Pts\/} is (0.\-0,0.\-5) then we are slicing at point 0.\-0 on dimension 2, point 0.\-5 on dimension 3. \-The result will have only one-\/dimensional boxes on dimensions \{1,2,3\}2,3\} = \{1\} and each box associated with this and its descendents will be a compressed to dimension \{1\} version of a box from the original this where that original box contained the point 0.\-0 on dimension 2 and 0.\-5 on dimension 3 (the range will be unchanged). \-Any boxes associated with the original this that did not contain the point 0.\-0 on dimension 2 and 0.\-5 on dimension 3 will not be represented in its compressed version in this


\begin{DoxyParams}{\-Parameters}
{\em slice\-Dims} & is a vector of dimensions to slice on. \\
\hline
{\em slice\-Pts} & is a vector of points to slice on, assumed to correspond to the dimensions in {\itshape slice\-Dims\/}, ie the ith value in {\itshape slice\-Dims\/} gives the dimension for the ith point in {\itshape slice\-Pts\/}. \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{\-Todo}
\item[\hyperlink{todo__todo000003}{\-Todo}]better description. \end{DoxyRefDesc}


\-Reimplemented in \hyperlink{classsubpavings_1_1RealMappedSPnode_ac674f3231fb03622048986a2a855b224}{subpavings\-::\-Real\-Mapped\-S\-Pnode}.



\-Definition at line 519 of file mappedspnode.\-hpp.


\begin{DoxyCode}
  {
    
    #ifdef SLICE_OUTPUT
      std::cout << "In MappedSPnode<T>::slice, I am " << getNodeName() << 
      std::endl;
    #endif
    
    std::vector<cxsc::real> fullSlicePts = sliceCheck(sliceDims, slicePts);
      
    _slice(sliceDims, fullSlicePts);
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a24ca6f695181dd45e5cf05d22042bb44}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!slice\-Check@{slice\-Check}}
\index{slice\-Check@{slice\-Check}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{slice\-Check}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ virtual std\-::vector$<$ cxsc\-::real $>$ {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf slice\-Check} (
\begin{DoxyParamCaption}
\item[{const std\-::vector$<$ int $>$ \&}]{slice\-Dims, }
\item[{const std\-::vector$<$ cxsc\-::real $>$ \&}]{slice\-Pts}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a24ca6f695181dd45e5cf05d22042bb44}


\-Check slice parameters and return a full vector of slice points. 

\-Checks that\-: 
\begin{DoxyItemize}
\item there is a box, 
\item that dimensions of box are compatible with slice\-Dims given, 
\item that slice\-Pts is of same size as slice\-Dims, 
\item that both slice\-Dims and slice\-Pts are non-\/empty, 
\item that slice\-Dims does not contain every dimension in this, 
\item that for the ith dimension in slice\-Dims, the i-\/th value in slice\-Pts is inside the interval of the box on the ith dimension in slice\-Dims. 
\end{DoxyItemize}

\-Throws exceptions if any problems are encountered.


\begin{DoxyParams}{\-Parameters}
{\em slice\-Dims} & is a vector of dimensions to slice on. \\
\hline
{\em slice\-Pts} & is a vector of points to slice on, assumed to correspond to the dimensions in {\itshape slice\-Dims\/}, ie the ith value in {\itshape slice\-Dims\/} gives the dimension for the ith point in {\itshape slice\-Pts\/}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a vector of slice points with as many elements in as the dimensions of this, with the values from {\itshape slice\-Pts\/} as the positions given by {\itshape slice\-Dims\/} and 0's (dummy values) otherwise. 
\end{DoxyReturn}


\-Definition at line 1591 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::slice().


\begin{DoxyCode}
  {
    std::vector < cxsc::real > fullSlicePts;
    
    if ( getParent() != NULL ) {
      throw NonRootNode_Error(
        "sliceCheck error found");
    }
    if ( !sliceDims.empty() || !slicePts.empty()) {
      
    
      if ( sliceDims.size() != slicePts.size()) {
        throw std::invalid_argument(
          "sliceCheck error found: sliceDims.size() != slicePts.size()");
      }
      
      /* get ordered unique values in sliceDims*/
      std::set<int> dimsSet(sliceDims.begin(), sliceDims.end());
      
      if ( dimsSet.size() < sliceDims.size()) {
        throw std::invalid_argument(
          "sliceCheck error found: duplicate dimensions in sliceDims");
      }
      
      if ( dimsSet.size() >= getDimension()) {
        throw std::invalid_argument(
          "sliceCheck error found: number of dimensions to slice on >=
       dimensions of this");
      }
      
      
      /* check that each of the values in sliceDims is a dimension of this*/
      ivector box = getBox();
      int lb = Lb(box);
      int ub = Ub(box);  // ub-lb+1 = dim of box
      
      // make a full vector of dim reals, 0.0's in all positions
      fullSlicePts =  std::vector< cxsc::real >(ub-lb+1, real(0.0));
      
      #ifdef SLICE_OUTPUT
        std::cout << "\nin slice" << getNodeName() << std::endl;
        std::cout << "lb = " << lb << " and ub = " << ub << std::endl;
      #endif
      
      std::vector < real >::const_iterator rit = slicePts.begin();
      for ( std::vector < int >::const_iterator cit = sliceDims.begin();
          cit < sliceDims.end();
          ++cit, ++rit) {
        int d = *cit;
        #ifdef SLICE_OUTPUT
          std::cout << "checking d =" << d << std::endl;
          std::cout << "*rit =" << (*rit) << std::endl;
        #endif
          
        if (d < lb || d > ub) {
          throw std::invalid_argument(
          "sliceCheck error found: illegal dimension in sliceDims");
        }
        #ifdef SLICE_OUTPUT
          std::cout << "box[d] =" << box[d] << std::endl;
          std::cout << "(*rit) <= box[d] =" << ((*rit) <= box[d]) << std::endl;
        #endif
        real r = *rit;
        if (!(r <= box[d])) {
          throw std::invalid_argument(
          "sliceCheck error found: illegal pt in slicePts");
        }
        #ifdef SLICE_OUTPUT
          std::cout << "fullSlicePts[" << (d-lb) << "] = " << r << std::endl;
        #endif
        
        fullSlicePts[d-lb] = r;
      }
      
    } // end check at least one is non-empty
    else  { // both empty
      throw std::invalid_argument(
        "sliceCheck error found: sliceDims and slicePts both empty");
    }
    return fullSlicePts;
  }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a65c8bb39917da7dc82fb07c9572c7286}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!split\-To\-Shape@{split\-To\-Shape}}
\index{split\-To\-Shape@{split\-To\-Shape}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{split\-To\-Shape}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ bool {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf split\-To\-Shape} (
\begin{DoxyParamCaption}
\item[{std\-::string}]{instruction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a65c8bb39917da7dc82fb07c9572c7286}


\-Splits paving according to string instruction. 

\-The instruction specifies the required shape in terms of the depth of the leaf nodes, in left to right order. \-The depth of a leaf node is equivalent to the number of bisections of the root box required to make the box represented by that leaf. i.\-e., the root has depth 0 and if that were bisected, the root node would have two child nodes each of level 1. \-Bisection of any one of the boxes represented by a child would give two more children, each of level 2 (2 bisections), etc.

\-Leaf levels in {\itshape instruction\/} can be separated by commas, spaces, or both.

\-For example, an instruction string \char`\"{}3, 3, 2, 1\char`\"{} would give an \hyperlink{classsubpavings_1_1SPSnode}{\-S\-P\-Snode} tree with 4 leaves, 2 of which would be level 3 (i.\-e. representing boxes resulting from 3 bisections of the root box, each of which would have volume 1/8 the size of the root box). \-Another leaf would represent a box resulting from 2 bisections of the root box (volume 1/4 that of the root box) and the 'right-\/most' leaf (in a drawing of the tree) would be the result of a single bisection of the root box and would have half the volume of the root box. \-This is a valid instruction string because it is possible to get leaves of those levels by a series of successive bisections of the root box and the volume of the leaves adds up to the volume of the root box.

\-Throws the following exceptions\-: 
\begin{DoxyItemize}
\item \-Throws a \hyperlink{classsubpavings_1_1NoBox__Error}{\-No\-Box\-\_\-\-Error} if the box is \-N\-U\-L\-L. 
\item \-Throws a \hyperlink{classsubpavings_1_1NonRootNode__Error}{\-Non\-Root\-Node\-\_\-\-Error} if this is not a root node (ie if this has a parent node). 
\item \-Throws an std\-::invalid\-\_\-argument exception if the {\itshape instruction\/} constain invalid characters (anything other than digits, whitespace or commas). 
\item \-Throws an std\-::logic\-\_\-error if the instruction is valid but does not describe an achievable tree shape. 
\end{DoxyItemize}


\begin{DoxyParams}{\-Parameters}
{\em instruction} & specifies the required shape, eg \char`\"{}3, 3, 2, 1\char`\"{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
true if the instruction could be successfully carried out, false if the instruction could not be carried out successfully. 
\end{DoxyReturn}
\begin{DoxyPrecond}{\-Precondition}
\-The instruction must be valid and describe an achievable tree shape. \-This must be a non-\/empty root node. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondition}
\hyperlink{classsubpavings_1_1SPnode_a7ea8cd3649cbf13d5743d3cb23315d72}{get\-Leaf\-Node\-Levels\-String()} == instruction 
\end{DoxyPostcond}


\-Definition at line 373 of file mappedspnode.\-hpp.



\-Referenced by main(), testing\-Intervals(), testing\-Ints(), testing\-Reals(), and testing\-Rvectors().


\begin{DoxyCode}
    {
    bool success = false;

    // checks:  is this the root?
    if (NULL != parent) {
      throw NonRootNode_Error("
      MappedSPNodeSingleRange<T>::splitToShape(std::string)");
    }

    // checks:  is there a root box
    if (NULL == theBox) {
      throw NoBox_Error("MappedSPNodeSingleRange<T>::splitToShape(std::string)"
      );
    }


    // checks: is the string properly formed?
    if (instruction.length() == 0) {
      throw std::invalid_argument(
      "MappedSPNodeSingleRange<T>::splitToShape(std::string) : No instruction")
      ;
    }
    std::string legal(", 0123456789");
    if (instruction.find_first_not_of(legal) != std::string::npos) {
      throw std::invalid_argument(
      "MappedSPNodeSingleRange<T>::splitToShape(std::string) : Illegal
       character");
    }

    // all seems to be okay, we can start spliting the root
    // specify what to look for as numbers or decimal point or + or -

    success = splitRootToShape(instruction);

    if (!success) {
      throw std::logic_error(
      "MappedSPNodeSingleRange<T>::splitToShape(std::string) : instruction not
       a proper tree");
      
     }
     
    return success;
   }
\end{DoxyCode}
\hypertarget{classsubpavings_1_1MappedSPnode_a4375171ab30bfe88e4a3306f321d3e24}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!swap\-M\-S\-P\-S\-R@{swap\-M\-S\-P\-S\-R}}
\index{swap\-M\-S\-P\-S\-R@{swap\-M\-S\-P\-S\-R}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{swap\-M\-S\-P\-S\-R}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ void {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf swap\-M\-S\-P\-S\-R} (
\begin{DoxyParamCaption}
\item[{{\bf \-Mapped\-S\-Pnode}$<$ \-T $>$ \&}]{spn}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a4375171ab30bfe88e4a3306f321d3e24}


\-Swap the properties of this and another. 

\-The properties swapped include all the node properties like name, box, etc, and children, and the range.


\begin{DoxyParams}{\-Parameters}
{\em spn} & the node to swap with. \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{\-Postcondition}
this has the properties that {\itshape spn\/} had before the operation, and spn has the properties this had before the operation. 
\end{DoxyPostcond}


\-Definition at line 958 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Real\-Mapped\-S\-Pnode\-::operator=(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::operator=().


\begin{DoxyCode}
  {
    /* theBox, parent, leftChild,
    rightChild and nodeName are inherited from base class */
    SPnode::swap(spn); // use the base version
    
    std::swap(range, spn.range);
  }
\end{DoxyCode}


\subsubsection{\-Member \-Data \-Documentation}
\hypertarget{classsubpavings_1_1MappedSPnode_a85f4e42ee09fcfa8c47835231ac3c21d}{\index{subpavings\-::\-Mapped\-S\-Pnode@{subpavings\-::\-Mapped\-S\-Pnode}!range@{range}}
\index{range@{range}!subpavings::MappedSPnode@{subpavings\-::\-Mapped\-S\-Pnode}}
\paragraph[{range}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \-T$>$ \-T {\bf subpavings\-::\-Mapped\-S\-Pnode}$<$ \-T $>$\-::{\bf range}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{classsubpavings_1_1MappedSPnode_a85f4e42ee09fcfa8c47835231ac3c21d}


\-A range of type \-T. 



\-Definition at line 1693 of file mappedspnode.\-hpp.



\-Referenced by subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-add\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-div\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-mult\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Add(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Div(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Mult(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-scalar\-Subtract(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-slice(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-\_\-subtract\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Expand\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::accept\-S\-P\-Value\-Visitor(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::allocate\-Ranges(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::get\-Range(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::leaf\-Output\-Tabs(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::\-Mapped\-S\-Pnode(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::minimise\-Leaves(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-Expand(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-Print(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::node\-String\-Summary(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::one\-Line\-Output(), subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::set\-Range(), and subpavings\-::\-Mapped\-S\-Pnode$<$ cxsc\-::real $>$\-::swap\-M\-S\-P\-S\-R().



\-The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
\hyperlink{mappedspnode_8hpp}{mappedspnode.\-hpp}\end{DoxyCompactItemize}
