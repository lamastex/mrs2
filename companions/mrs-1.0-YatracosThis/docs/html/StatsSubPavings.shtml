<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MRS: A C++ Class Library for Statistical Set Processing: Subpavings for processing statistical sample data</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">MRS: A C++ Class Library for Statistical Set Processing
   &#160;<span id="projectnumber">0.1.2-beta1300</span>
   </div>
   
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('StatsSubPavings.shtml','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Subpavings for processing statistical sample data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="StatsSubPavings.shtml#statssec_intro">Introduction</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssec_organising">Organising data</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssec_statsclass">A class for statistical subpavings</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssec_usingStatsClass">Using the statistical subpavings class</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssec_technicalities">Implementing the statistical subpavings class</a></li>
</ul>
<hr/>
<h2><a class="anchor" id="statssec_intro"></a>
Introduction</h2>
<p>Subpavings for processing statistical sample data are a refinement of regular subpavings where each box in a subpaving can be associated with data points in a sample.</p>
<hr/>
<h2><a class="anchor" id="statssec_organising"></a>
Organising data</h2>
<p>The subpaving becomes a way to organise the sample data. The boxes of the subpaving can be thought of a 'buckets' for the data points, each box containing some of the data points. A data point x belongs in a box or interval vector [<b>x</b>] if [<b>x</b>] contains x.</p>
<p>The binary tree representation of the subpaving shows how the subpaving has been formed.</p>
<div class="image">
<img src="nonminimalsp1.png" alt="nonminimalsp1.png"/>
<div class="caption">
A 2-dimensional subpaving and its representation as a binary tree</div></div>
 <p>Note that although we are still using <em>regular</em> subpavings (ie, we are bisecting boxes along their longest dimension), our subpavings are no longer <em>minimal</em> - that is, we are not pruning branches from the tree to ensure that each node has at most one child leaf node.</p>
<p>Using the binary tree representation of a subpaving we can think of the process of organising data as adding data starting at the root and having the data make its way through the tree to the leaf node whose box contains the data, going through the following steps at each node it gets to from the root down:</p>
<ol>
<li>
If the box of the node contains the data, continue <em>[if the box does not contain the data, return something indicating "not this node"]</em> </li>
<li>
If the box has been subdivided (node has children), see which subbox the data is in, ie recurse the addition process from step 1. on the children </li>
<li>
If the box has not been subdivided then the data can be associated with this node </li>
</ol>
<p>Thus the data moves through the tree until it finds a leaf node whose box contains it.</p>
<p>Because a subpaving comprises non-overlapping boxes, a data point should belong to at most only one box. If the data point is outside the box of the root node of a subpaving, it will clearly not be in any of the boxes of the leaves.</p>
<hr/>
<h2><a class="anchor" id="statssec_statsclass"></a>
A class for statistical subpavings</h2>
<p>We extend the <a class="el" href="classsubpavings_1_1SPnode.shtml">SPnode </a> base class to a class specifically designed for processing statistical sample data. This class is called <a class="el" href="classsubpavings_1_1SPSnode.shtml">SPSnode </a> and a pointer to an SPSnode is aliased as <a class="el" href="namespacesubpavings.shtml#ace6b16f0adf0db13eeb38e124d5328c6">StatsSubPaving </a>. This class does not have the complete arsenal of methods for set computation of its base class SPnode: its job is different - organising and summarising statistical sample data.</p>
<p>SPSnodes summarise as well as organise data: each node can maintain summaries of the data it is associated with, such as a count (number of data points in the box), sum, etc. Because of the tree structure, this means that we can maintain a summary of the data at each level of the tree, not just in relation to the final subpaving (the leaf nodes).</p>
<p>As the data moves down the tree, each node it passes through updates its summary statistics, such as a count and sum of data points covered by the box of that node.</p>
<div class="image">
<img src="statsspaddingdata.png" alt="statsspaddingdata.png"/>
<div class="caption">
Summarising data with a binary tree</div></div>
 <p>By default, all recursively computable statistics provided are maintained in each SPSnode. However, since this uses memory and is not always needed, an SPSnode can be constructed to <a class="anchor" id="SPScountsonly"></a>only maintain count statistics. See <a class="el" href="classsubpavings_1_1SPSnode.shtml#a99af67614faaf93216ec0991e96ddb02">subpavings::SPSnode::countsOnly</a>.</p>
<hr/>
<h2><a class="anchor" id="statssec_usingStatsClass"></a>
Using the statistical subpavings class</h2>
<p>The statistical subpavings class <a class="el" href="classsubpavings_1_1SPSnode.shtml">SPSnode </a> is designed to be a flexible tool.</p>
<p>An SPSnode object represents only part of a subpaving. The entire statistical subpaving is represented by a tree of SPSnodes. The behaviour of the tree of nodes will usually be controlled by a wrapper or manager object. In particular, there are no fixed rules specified within the SPSnode class to determine when a box in the subpaving represented by a tree of nodes is split. The wrapper or manager class will specify the methods which determine the development of the subpaving/its tree representation.</p>
<p>An example of such a wrapper or manager object is the AdaptiveHistogram class, see <a class="el" href="AdaptiveHistograms.shtml">Adaptive histograms</a> and <a class="el" href="AdaptiveHistograms.shtml#adhsec_examples">Examples using adaptive histograms</a></p>
<p>These manager classes will usually determine the rules for constructing the subpaving and simply pass on 'instructions' to the node in the tree representing a particular box in the subpaving. This allows decisions to be made on the basis of the characteristics of the statistical subpaving as a whole and not just an individual node.</p>
<hr/>
<h2><a class="anchor" id="statssec_technicalities"></a>
Implementing the statistical subpavings class</h2>
<p>For a full description of this class, see the <a class="el" href="classsubpavings_1_1SPSnode.shtml">SPSnode class </a> documentation. Here we discuss only some of the important points of this class.</p>
<ul>
<li><a class="el" href="StatsSubPavings.shtml#statssubsec_splitting">Bisecting a box of a statistical subpaving</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssubsec_data">Associating data with a node</a></li>
<li><a class="el" href="StatsSubPavings.shtml#statssubsec_accumulating">C-XSC and processing statistical sample data</a></li>
</ul>
<h3><a class="anchor" id="statssubsec_splitting"></a>
Bisecting a box of a statistical subpaving</h3>
<p>When we bisect a box of a statistical subpaving to form two subboxes, we have to make a decision about which of the new boxes is considered to include the boundary hyperplane. This is so that, if we have a data point which falls exactly on that boundary, it is clear which of the subboxes it is associated with.</p>
<p>We consider that the boundary to belong to the <b>right</b> child. That is, the interval element of the <b>right</b> child's box on the splitting dimension is a left-closed interval whereas the interval element of the left child's box on the splitting dimension is a right-open interval. For example, if the parent node box interval on the splitting dimension is [1 5] then the split takes place at the midpoint (3) and the right child is considered to have a box whose interval, on that dimesion, is [3 5] whereas the left child has [1 3). [1 5] is split into [1 3)[3 5]. A datapoint which is contained by the parent node's box and which has value 3 on the splitting dimension will be considered to belong to the right child's box and not to the left child's box.</p>
<h3><a class="anchor" id="statssubsec_data"></a>
Associating data with a node</h3>
<p>A node of a tree representation of a subpaving is associated with a particular box of the subpaving. The box may have been subsequently subdivided, in which case the node will have children. A leaf node represents an undivided box in the subpaving. As well as keeping summaries of the data associated with a node (the data points covered by its box) we want to keep the full dataset itself as well, but without duplication. Thus, we only associate data with leaf nodes. When a box in the paving is subdivided the data associated with the corresponding node is passed down to the new children.</p>
<p>In order to keep our implementation as flexible as possible, we maintain a container for the sample data outside the SPSnode class. A data point in this 'big collection' of data is associated with a node through the iterator to that data point in the big collection. The node does not 'have' the data, it simply knows where the data it is associated with is stored. In the implementation of SPSnode, a node has a data member which is a container for iterators into the big data collection to store references to the data that it is associated with.</p>
<h3><a class="anchor" id="statssubsec_accumulating"></a>
C-XSC and processing statistical sample data</h3>
<p>The <a class="el" href="classsubpavings_1_1SPSnode.shtml">SPSnode class </a> is implemented using the C-XSC library. A data point is a cxsc::rvector and a box or interval vector is a cxsc::ivector. For example, a point in 3-d which would be represented in cartesian coordinates as (1.0, 2.0, 3.0) is a 3-dimensional rvector whose elements are, in order, the reals 1.0, 2.0, and 3.0. This point would be contained in (in cxsc, the operator &lt;= meaning "is an element of") a 3 dimensional ivector. The ivector whose elements are [0.0 2.0], [1.0 3.0], [2.0, 3.0] defines a box which contains this point.</p>
<p>Summaries of data values are stored in csxc::dotprecision accumulators to mitigate the risk of inaccuracy in summing floating point numbers (this risk is higher when the numbers being summed have large differences in order of magnitude, as will be the case when a relatively small new data point value is added to a much larger accumulated sum of data points so far). </p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Mon Sep 28 2015 15:58:24 for MRS: A C++ Class Library for Statistical Set Processing by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
